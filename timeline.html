<div class="timeline-view-settings">
    <div class="inline-drawer">
        <div class="inline-drawer-toggle inline-drawer-header">
            <b>Timelines</b>
            <div class="inline-drawer-icon fa-solid fa-circle-chevron-down down"></div>
        </div>
        <div class="inline-drawer-content">
            <div class="timeline-view-settings_block flex-container">
                <label for="tl_auto_expand_swipes" title="Expand swipe nodes when the timeline view first opens, and whenever the graph is refreshed." data-i18n="[title]Expand swipe nodes when the timeline view first opens, and whenever the graph is refreshed.">Auto-expand Swipes</label>
                <input id="tl_auto_expand_swipes" type="checkbox" />
            </div>
            <div class="timeline-view-settings_block flex-container">
                <label for="tl_tooltip_fixed" title="Always show the node tooltip (hover) and node full info panel (click) at the bottom left of the screen. When off, show them near the node." data-i18n="[title]Always show the node tooltip (hover) and node full info panel (click) at the bottom left of the screen. When off, show them near the node.">Fixed Position for Tooltip and Full Info</label>
                <input id="tl_tooltip_fixed" type="checkbox" />
            </div>
            <div class="timeline-view-settings_block flex-container">
                <label for="tl_gpu_acceleration" title="Use GPU acceleration for positioning the full info panel that appears when you click a node. If the tooltip arrow tends to disappear, turning this off may help." data-i18n="[title]Use GPU acceleration for positioning the full info panel that appears when you click a node. If the tooltip arrow tends to disappear, turning this off may help.">GPU Accelerated Full Info Panel</label>
                <input id="tl_gpu_acceleration" type="checkbox" />
            </div>
            <div class="timeline-view-settings_block flex-container">
                <input value="Style Settings" class="menu_button" type="submit" id="toggleStyleSettings" title="Settings for the visual appearance of the Timelines graph." data-i18n="[title]Settings for the visual appearance of the Timelines graph.">
            </div>
            <!-- The collapsible style settings section -->
            <div id="styleSettingsArea" class="hidden">
                <div class="timeline-view-settings_block flex-container">
                    <label for="tl_use_chat_colors" title="Use the colors of the ST GUI theme, instead of the colors configured in Color Settings specifically for this extension." data-i18n="[title]Use the colors of the ST GUI theme, instead of the colors configured in Color Settings specifically for this extension.">Use UI Theme</label>
                    <input id="tl_use_chat_colors" type="checkbox" />
                </div>
                <div class="timeline-view-settings_block flex-container">
                    <label for="tl_show_legend" title="Show a legend for colors corresponding to different characters and chat checkpoints." data-i18n="[title]Show a legend for colors corresponding to different characters and chat checkpoints.">Show Legend</label>
                    <input id="tl_show_legend" type="checkbox" />
                </div>
                <div class="timeline-view-settings_block flex-container">
                    <label for="tl_swipe_scale" title="When enabled, nodes that have swipes will appear subtly larger." data-i18n="[title]When enabled, nodes that have swipes will appear subtly larger.">Scale Nodes with Swipes</label>
                    <input id="tl_swipe_scale" type="checkbox" />
                </div>
                <div class="timeline-view-settings_block flex-container">
                    <label for="tl_avatar_as_root" title="Show the AI character's avatar as the root node. When off, show the root node as blank." data-i18n="[title]Show the AI character's avatar as the root node. When off, show the root node as blank.">Avatar As Root</label>
                    <input id="tl_avatar_as_root" type="checkbox" />
                </div>
                <!-- DANGER Will Robinson: `onInputChange` in `index.js` depends on some specific things here to update the Timelines settings GUI correctly:

                   - The specific element IDs for the zoom settings trigger special handling; this is a group of five settings with non-trivial logic between them.
                   - The 'floatingpoint' class disables integer rounding for displaying the value of a setting.
                -->
                <div class="timeline-view-settings_block flex-container">
                    <label for="tl_zoom_current_chat">Zoom level when zooming to current chat (<span id="tl_zoom_current_chat_value"></span>)</label>
                    <input id="tl_zoom_current_chat" type="range" class="floatingpoint" min="0.1" max="10.0" step="0.1" />
                </div>
                <div class="timeline-view-settings_block flex-container">
                    <input id="tl_zoom_min_cb" type="checkbox" />
                    <label for="tl_zoom_min">Minimum zoom level (<span id="tl_zoom_min_value"></span>)</label>
                    <input id="tl_zoom_min" type="range" class="floatingpoint" min="0.1" max="10.0" step="0.1" />
                </div>
                <div class="timeline-view-settings_block flex-container">
                    <input id="tl_zoom_max_cb" type="checkbox" />
                    <label for="tl_zoom_max">Maximum zoom level (<span id="tl_zoom_max_value"></span>)</label>
                    <input id="tl_zoom_max" type="range" class="floatingpoint" min="0.1" max="10.0" step="0.1" />
                </div>
                <small>
                    All sizes are specified in pixels at zoom level 1.0. The size set here multiplied by the zoom level is the final on-screen size. See <a href="https://js.cytoscape.org/">Cytoscape documentation</a> for the exact meanings of the settings.
                </small>
                <div class="timeline-view-settings_block flex-container">
                    <label for="tl_node_width">Node Width (<span id="tl_node_width_value"></span>)</label>
                    <input id="tl_node_width" type="range" min="1" max="100" />
                </div>
                <div class="timeline-view-settings_block flex-container">
                    <label for="tl_node_height">Node Height (<span id="tl_node_height_value"></span>)</label>
                    <input id="tl_node_height" type="range" min="1" max="100" />
                </div>
                <div class="timeline-view-settings_block flex-container">
                    <label for="tl_node_separation"
                        >Node Separation (<span id="tl_node_separation_value"></span>)</label
                    >
                    <input id="tl_node_separation" type="range" min="1" max="100" />
                </div>
                <div class="timeline-view-settings_block flex-container">
                    <label for="tl_edge_separation"
                        >Edge Separation (<span id="tl_edge_separation_value"></span>)</label
                    >
                    <input id="tl_edge_separation" type="range" min="1" max="100" />
                </div>
                <div class="timeline-view-settings_block flex-container">
                    <label for="tl_rank_separation"
                        >Rank Separation (<span id="tl_rank_separation_value"></span>)</label
                    >
                    <input id="tl_rank_separation" type="range" min="1" max="100" />
                </div>
                <div class="timeline-view-settings_block flex-container">
                    <label for="tl_spacing_factor">Spacing Factor (<span id="tl_spacing_factor_value"></span>)</label>
                    <input id="tl_spacing_factor" type="range" min="1" max="100" />
                </div>
                <div class="timeline-view-settings_block flex-container">
                    <label for="tl_node_shape">Node Shape</label>
                    <select id="tl_node_shape">
                        <option value="ellipse">Ellipse</option>
                        <option value="triangle">Triangle</option>
                        <option value="round-triangle">Round-Triangle</option>
                        <option value="rectangle">Rectangle</option>
                        <option value="round-rectangle">Round-Rectangle</option>
                        <option value="bottom-round-rectangle">Bottom-Round-Rectangle</option>
                        <option value="cut-rectangle">Cut-Rectangle</option>
                        <option value="barrel">Barrel</option>
                        <option value="rhomboid">Rhomboid</option>
                        <option value="right-rhomboid">Right-Rhomboid</option>
                        <option value="diamond">Diamond</option>
                        <option value="round-diamond">Round-Diamond</option>
                        <option value="pentagon">Pentagon</option>
                        <option value="round-pentagon">Round-Pentagon</option>
                        <option value="hexagon">Hexagon</option>
                        <option value="round-hexagon">Round-Hexagon</option>
                        <option value="concave-hexagon">Concave-Hexagon</option>
                        <option value="heptagon">Heptagon</option>
                        <option value="round-heptagon">Round-Heptagon</option>
                        <option value="octagon">Octagon</option>
                        <option value="round-octagon">Round-Octagon</option>
                        <option value="star">Star</option>
                        <option value="tag">Tag</option>
                        <option value="round-tag">Round-Tag</option>
                        <option value="vee">Vee</option>
                    </select>
                </div>

                <div class="timeline-view-settings_block flex-container">
                    <label for="tl_curve_style">Curve Style</label>
                    <select id="tl_curve_style">
                        <option value="haystack">Haystack</option>
                        <option value="straight">Straight</option>
                        <option value="straight-triangle">Straight-Triangle</option>
                        <option value="bezier">Bezier</option>
                        <option value="unbundled-bezier">Unbundled-Bezier</option>
                        <option value="segments">Segments</option>
                        <option value="taxi">Taxi</option>
                    </select>
                </div>
                <div class="timeline-view-settings_block flex-container">
                    <label for="tl_align">Alignment</label>
                    <select id="tl_align">
                        <option value="UL">Upper Left</option>
                        <option value="UR">Upper Right</option>
                        <option value="DL">Down Left</option>
                        <option value="DR">Down Right</option>
                    </select>
                </div>
                <div class="timeline-view-settings_block flex-container">
                    <input value="Reset Settings" class="menu_button" type="submit" id="resetSettingsBtn">
                </div>
            </div>
            <div class="timeline-view-settings_block flex-container">
                <input value="Color Settings" class="menu_button" type="submit" id="toggleColorSettings" title="Color configuration for Timelines when 'Use UI Theme' in Style Settings is off." data-i18n="[title]Color configuration for Timelines when 'Use UI Theme' in Style Settings is off.">
            </div>
            <div id="colorSettingsArea" class="hidden">
                <div class="timeline-view-settings_block flex-container">
                    <toolcool-color-picker id="bookmark-color-picker" value="#ff0000"></toolcool-color-picker>
                    <span data-i18n="Checkpoint Color">Checkpoint Color</span>
                </div>
                <div class="timeline-view-settings_block flex-container">
                    <toolcool-color-picker id="char-node-color-picker" value="#FFFFFF"></toolcool-color-picker>
                    <span data-i18n="Character Node Color">Character Node Color</span>
                </div>
                <div class="timeline-view-settings_block flex-container">
                    <toolcool-color-picker id="user-node-color-picker" value="#ADD8E6"></toolcool-color-picker>
                    <span data-i18n="User Node Color">User Node Color</span>
                </div>
                <div class="timeline-view-settings_block flex-container">
                    <toolcool-color-picker id="edge-color-picker" value="#555"></toolcool-color-picker>
                    <span data-i18n="Edge Color">Edge Color</span>
                </div>
            </div>
            <div class="timeline-view-settings_block flex-container">
                <input id="show_timeline_view" class="menu_button" type="submit" value="Show Timeline" title="Open the timeline view. Same as the slash command '/tl'." data-i18n="[title]Open the timeline view. Same as the slash command '/tl'." />
            </div>
            <!-- The Modal -->
            <div class="timelines-modal-container hidden">  <!-- A place in the DOM to store the modal when not in use -->
                <div id="timelinesModal" class="modal">  <!-- The transparent outer modal, covering the whole viewport -->
                    <div id="networkContainer">  <!-- The inner modal, i.e. the actual content -->
                        <button class="close" title="Close">&times;</button>
                        <button class="rotate" title="Rotate Graph">&orarr;</button>
                        <button class="expand" title="Toggle Expand Swipes">&#x26D5;</button>
                        <button class="reload" title="Reload Graph [/tl r]">&#x1f5d8;</button>
                        <button class="zoomtofit" title="Zoom to Fit">[]</button>
                        <button class="zoomtocurrent" title="Zoom to Current Chat">&#x2b95;</button>
                        <input id="transparent-search" type="text" placeholder="Search [Ctrl+Shift+F]..." />
                        <div class="graph-container">
                            <!-- Relative positioned container -->
                            <div id="timelinesDiagramDiv"></div>
                            <div id="legendDiv" class="legend-bottom-right"></div>
                            <div id="fixedReference" style="position: fixed; bottom: 0; left: 0; width: 0; height: 0;"></div>
                            <!-- Legend with absolute positioning -->
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
